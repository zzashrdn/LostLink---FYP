{% extends "base.html" %}
{% block content %}

<!-- Hide flash messages -->
<style>.flash-wrap { display: none !important; }</style>

<div class="items-wrapper">
  <div class="items-box">
    <h2>Reported Items</h2>

    {% if items %}
      <div class="items-grid">
        {% for item in items %}
          <div class="item-card">
            {% if item[5] %}
              <img src="{{ url_for('static', filename='uploads/' ~ item[5]) }}" alt="Item photo">
            {% endif %}

            <h3>
              {{ item[1] }}
              {% if item[9] == 'pending' %}
                <span class="badge badge-pending">Pending</span>
              {% elif item[9] == 'approved' %}
                <span class="badge badge-approved">Approved</span>
              {% elif item[9] == 'rejected' %}
                <span class="badge badge-rejected">Rejected</span>
              {% elif item[6] == 'claimed' %}
                <span class="badge badge-claimed">Claimed</span>
              {% elif item[6] == 'lost' %}
                <span class="badge badge-lost">Lost</span>
              {% elif item[6] == 'found' %}
                <span class="badge badge-found">Found</span>
              {% endif %}

            </h3>

            <p><strong>Description:</strong> {{ item[2] }}</p>
            <p><strong>Location:</strong> {{ item[3] }}</p>
            <p><strong>Reported by:</strong> {{ item[7] }} on {{ item[4] }}</p>

            {% if item[9] == 'pending' %}
              <p><strong>Status:</strong> ⏳ Claim Pending Approval</p>

            {% elif item[9] == 'approved' %}
              <p><strong>Status:</strong> ✅ Claim Approved</p>

            {% elif item[9] == 'rejected' %}
              <p><strong>Status:</strong> ❌ Claim Rejected</p>

            {% elif item[6] == 'claimed' %}
              <p><strong>Status:</strong> ✅ Claimed</p>

            {% elif item[6] == 'found' %}
              <form method="GET" action="{{ url_for('claim_item', item_id=item[0]) }}">
                <button type="submit">Claim This Item</button>
              </form>

            {% else %}
              <p><strong>Status:</strong> {{ item[6]|capitalize }}</p>
            {% endif %}
          </div>
        {% endfor %}

      </div>
    {% else %}
      <p>No items have been reported yet.</p>
    {% endif %}

    <a href="{{ url_for('home') }}"><button class="back-btn">Back to Home</button></a>
  </div>
</div>


{% endblock %}
